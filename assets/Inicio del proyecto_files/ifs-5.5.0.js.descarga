!function(){"use strict";var e={3184:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={error:-3,blocked:-2,optedOut:-1,unset:0,crossStorage:1,storage:2,api:3,sessionApi:4}},2403:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setCookieValue=t.getCookieValue=void 0;t.getCookieValue=function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null};t.setCookieValue=function(e,t,o){if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var n="; expires="+o.toUTCString();return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+n+"; path=/",!0}},7901:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.AD_COOKIE_KEY=void 0;var n=o(2403);t.AD_COOKIE_KEY="__adid";var i=function(){function e(e,t){this.storageCommunicator=e,this.journeyCode=t}return e.prototype.init=function(){var e=null,o=n.getCookieValue(t.AD_COOKIE_KEY);o&&((e=JSON.parse(decodeURIComponent(o))[this.journeyCode]||null)&&(e.ed=e.ed||0,e.ed<(new Date).getTime()&&(e=null)));this.storageCommunicator.storeDirectMessage("ad",e)},e}();t.default=i},6487:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_STORAGE_PREFIX=void 0;var n=o(3184),i=o(2403);t.GLOBAL_STORAGE_PREFIX="ve";var a="vetestcookie";function r(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}function s(e,t){r(e,t)}function u(e){try{localStorage.removeItem(e)}catch(e){}}function c(e){var t,o;try{t=JSON.parse(e.data)||{}}catch(e){t={}}switch(t.command){case 2:(o=t).hasOwnProperty("value")&&o.hasOwnProperty("key")&&s(o.key,o.value);break;case 3:t.hasOwnProperty("key")&&u(t.key)}}function d(){try{document.cookie="vetestcookie=test; samesite=none; secure";var e=!!i.getCookieValue(a);return e&&(document.cookie="vetestcookie=; expires=Thu, 01 Jan 1970 00:00:01 GMT; samesite=none; secure"),e}catch(e){return!1}}var f=function(){function e(e,o){this.iframeId=o,this.journeyId=e,this.schema=function(e){return"^"+(t.GLOBAL_STORAGE_PREFIX?t.GLOBAL_STORAGE_PREFIX+"\\.":t.GLOBAL_STORAGE_PREFIX)+e+"\\."}(e),this.prefixRegExp=new RegExp(this.schema),this.targetOrigin=document.referrer.replace(/^([a-z]*:\/\/[^/]+).*$/,"$1")||"*",this.ifsState={audit:{isCookieAvailable:d(),isStorageAvailable:!0,message:""},state:{veCookieId:"",veCookieStatus:n.default.unset}}}return e.prototype.init=function(e){var t=this;void 0===e&&(e=function(){return window.localStorage});try{e()}catch(e){this.ifsState.audit.isStorageAvailable=!1,this.ifsState.audit.message=e.message}this.extendState(),this.ifsState.audit.isStorageAvailable&&(window.addEventListener("message",(function(e){return c(e)}),!1),function(e){var t=new RegExp("^"+e+"\\.[a-f\\d]{8}-(?:[a-f\\d]{4}-){3}[a-f\\d]{12}");try{["cssd","live","tesd","activation","usg","std","tos","pv","sid","sessionId","usr","ad"].forEach((function(t){return u(e+"."+t)})),Object.keys(localStorage).filter((function(e){return t.test(e)})).forEach((function(e){return u(e)}))}catch(e){}}(this.journeyId),this.ifsState.data=this.getJourneyItems(),window.addEventListener("storage",(function(e){return t.handleStorageEvent(e)}),!1))},e.prototype.finishInitialization=function(){this.sendMessageToParent("ready",this.ifsState)},e.prototype.sendMessageToParent=function(e,t){void 0===t&&(t=null),window.parent.postMessage(JSON.stringify({id:this.iframeId,messageType:e,messageBody:t}),this.targetOrigin)},e.prototype.storeDirectMessage=function(e,t){void 0===t&&(t=null),"ad"!==e?s(e,t):this.ifsState.ad=t},e.prototype.extendState=function(){var e,t=this.ifsState.audit.isCookieAvailable,o=i.getCookieValue("__ssid")||"";e=t?o?n.default.crossStorage:n.default.unset:n.default.blocked,this.ifsState.state={veCookieId:o,veCookieStatus:e}},e.prototype.getJourneyItems=function(e){var t=this;void 0===e&&(e="");var o={};try{var n=Object.keys(localStorage);(e?[e]:n.filter((function(e){return t.prefixRegExp.test(e)}))).forEach((function(e){o[e.replace(t.prefixRegExp,"")]=function(e){var t="null";try{return t=localStorage.getItem(e)||t,JSON.parse(t)}catch(o){if("SyntaxError"!==o.name)return;r(e,t)}return t}(e)}))}catch(e){}return o},e.prototype.handleStorageEvent=function(e){if("storage"===e.type&&e.key&&this.prefixRegExp.test(e.key)){var t=this.getJourneyItems(e.key);this.sendMessageToParent("data",t)}},e}();t.default=f}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}!function(){var e=o(7901);function t(e){var t=window.location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?decodeURIComponent(t[1]):"null"}var n=new(o(6487).default)(t("journeyId"),t("iframeId"));n.init(),new e.default(n,t("journeyCode")).init(),n.finishInitialization()}()}();